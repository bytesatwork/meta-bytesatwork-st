From 7c9db6c2dd5d3d1e15c48753121767625f4249ea Mon Sep 17 00:00:00 2001
From: Daniel Ammann <daniel.ammann@bytesatwork.ch>
Date: Tue, 20 Dec 2022 13:55:20 +0100
Subject: [PATCH] fdts: stm32mp15xx-byteengine: Add spi-nor flash device

It is the boot device.

Signed-off-by: Daniel Ammann <daniel.ammann@bytesatwork.ch>
---
 fdts/stm32mp15xx-byteengine.dtsi | 19 +++++++++++++++++++
 1 file changed, 19 insertions(+)

diff --git a/fdts/stm32mp15xx-byteengine.dtsi b/fdts/stm32mp15xx-byteengine.dtsi
index 6818ffbb6..cb173d101 100644
--- a/fdts/stm32mp15xx-byteengine.dtsi
+++ b/fdts/stm32mp15xx-byteengine.dtsi
@@ -46,6 +46,25 @@
 	status = "okay";
 };
 
+&qspi {
+	pinctrl-names = "default";
+	pinctrl-0 = <&qspi_clk_pins_a &qspi_bk1_pins_a>;
+	reg = <0x58003000 0x1000>, <0x70000000 0x4000000>;
+	#address-cells = <1>;
+	#size-cells = <0>;
+	status = "okay";
+
+	flash0: w25n01g@0 {
+		compatible = "jedec,spi-nor";
+		reg = <0>;
+		spi-rx-bus-width = <2>;
+		spi-tx-bus-width = <2>;
+		spi-max-frequency = <10000000>;
+		#address-cells = <1>;
+		#size-cells = <1>;
+	};
+};
+
 &i2c4 {
 	pinctrl-names = "default";
 	pinctrl-0 = <&i2c4_pins_a>;
-- 
2.39.2

